<HTML>
	<head>
        <title>Cube Puzzle</title>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<style>
            .imgSquare {
                display: inherit;
            }
            
            .holderDiv {
                background-image: url("https://ichef.bbci.co.uk/news/660/cpsprodpb/E9DF/production/_96317895_gettyimages-164067218.jpg")
            }

		</style>
		<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
		<script src="puzzle_helpers.js"></script>

		<script>
            showingFinal = false


		$(document).keypress(function(e) {
			// alert(e.which)
			if(e.which == 97) {

			} else if(e.which == 116) {

		 } else if(e.which == 114) {
            randomizeLocations(25)
		 }
		});

    function addElement(css, id) {
        var x = document.getElementById("holder")
        var d = document.createElement("div")
        d.setAttribute("class", "imgSquare")
        d.setAttribute("id", id)
				d.setAttribute("class", "imgSquare")


        d.setAttribute("style", css + "position: absolute;");
        x.appendChild(d)
    }

    function createSquares(src, width, height, rows, cols) {
        blockWidth = width / rows
        blockHeight = height / cols
        yOffset = 100
        c = 0
        for (y = 0; y < rows; y++) {
             for (x = 0; x < cols; x++) {
                topY = yOffset + y * blockHeight
                right = width - blockWidth - (x * blockWidth)
                bottom = height - blockHeight - (y * blockHeight)
                left = x * blockWidth
                clip = topY + "px " + right + "px " + bottom + "px " + left + "px"
                bgposY = -topY
                bgposX = -left
                css = "background-position-y: " + bgposY +"px; background-position-x: " + bgposX +"px; background-image: url(" + src + "); height:" + blockHeight + "px; width: " + blockWidth+ "px; top: " + topY + "px; left: " + left  + "px;"
                addElement(css, "subImg" + c)
                c+=1
            }
        }
    }

		function shuffle(array) {
		  var currentIndex = array.length, temporaryValue, randomIndex;

		  // While there remain elements to shuffle...
		  while (0 !== currentIndex) {

		    // Pick a remaining element...
		    randomIndex = Math.floor(Math.random() * currentIndex);
		    currentIndex -= 1;

		    // And swap it with the current element.
		    temporaryValue = array[currentIndex];
		    array[currentIndex] = array[randomIndex];
		    array[randomIndex] = temporaryValue;
		  }

		  return array;
}

	var selImages = Array()


  $(document).ready(function() {
	createSquares("https://ichef.bbci.co.uk/news/660/cpsprodpb/E9DF/production/_96317895_gettyimages-164067218.jpg",650,350,5,5)
		$( ".imgSquare" ).click(function() {
			selImages.push(this)
			if (selImages.length == 2) {
				swap(selImages[0],selImages[1])
				selImages = Array()
			}
		});
      
      randomizeLocations(25)
  });

            function toggleFinal() {
                if (showingFinal) {
                    $(".imgSquare").show()
                } else {
                    $(".imgSquare").hide()
                }
                showingFinal = !showingFinal
            }
            
  function randomizeLocations(length) {
			a1 = Array()
			a2 = Array()
			for (i = 0; i < length; i++) {
				a1[i] = i
				a2[i] = i
			}

			a1 = shuffle(a1)
			a2 = shuffle(a2)

			for (i = 0; i < length; i++) {
				i1 = document.getElementById("subImg" + a1[i])
				i2 = document.getElementById("subImg" + a2[i])
				swap(i1,i2)
			}
  }

function swap(f1, f2)
{
	var initTop = f1.style.top;
	var initLeft = f1.style.left;

	f1.style.top = f2.style.top;
	f1.style.left = f2.style.left;
	f2.style.top=initTop;
	f2.style.left=initLeft;
}


		</script>
	</head>
<BODY>
    
	<div id = "holder" class = "holderDiv">
    
    </div>
<button type="button" onclick="randomizeLocations(25)">Click Me!</button>

</BODY>
</HTML>
